{% extends 'transcendence/base.html' %}
{% load static %}
{% load crispy_forms_filters %}
{% load widget_tweaks %}
{% block content %}


      <script>


      document.addEventListener('DOMContentLoaded', function() {
    // Your code here
    let fileInput = document.getElementById('registration-file-input');
    let selectedImageName = document.getElementById('selected-image-name');
    // Listen for changes in the file input
    fileInput.addEventListener('change', function() {
      // Check if a file is selected
      if (fileInput.files.length > 0) {
        // Display the name of the selected file
        selectedImageName.textContent = fileInput.files[0].name;
      } else {
        // If no file is selected, clear the displayed name
        selectedImageName.textContent = '';
      }
    })
});
    // Get the file input and paragraph elements

  </script>

<div class="card rounded-6 bg-radial-fill-card border-solid-gray-1 text-whitesmoke">
    <div class="card-body d-flex-align-center-col">
        <h2>Register</h2>
        <form method="post" class="container" enctype="multipart/form-data" action="{% url 'registration' %}">
            <div class="d-flex-align-center-col m-5 gap-3">
                {% csrf_token %}
                    <div class="d-flex-align-center-col">
                        <h6 class=""> Username </h6>
                        {% render_field form.username class="form-control"%}
                    </div>
                    <div class="d-flex-align-center-col">
                        <h6 class=""> Email </h6>
                        {% render_field form.email class="form-control"%}
                    </div>
                    <div class="d-flex-align-center-col">
                        <h6 class=""> Bio </h6>
                        {% render_field form.bio class="form-control"%}
                    </div>
                    <div class="gap-0 d-flex-align-center-col">
                        <h6 class="bottom-50">Profile Picture</h6>
                        <div class="col container-label-border-radius-solid d-inline-flex flex-row align-items-center">
                                <label for="registration-file-input" class="btn btn-label-profile-picture" id="btn-label"> Upload </label>
                                <span id="selected-image-name" class="mx-auto" > No file </span>
                                {% render_field form.picture style="display: none" id="registration-file-input"%}
                        </div>
                        <div class="d-flex-align-center-col mt-4">
                            <h6 class=""> Password </h6>
                            {% render_field form.password1 class="form-control "%}
                        </div>
                    </div>
                    <div class="d-flex-align-center-col">
                        <h6 class=""> Password (again) </h6>
                        {% render_field form.password2 class="form-control"%}
                    </div>
                    <ul>
                        {% if form.non_field_errors %}
                          <li>{{ form.non_field_errors }}</li>
                        {% endif %}
                        {% for field in form %}
                          {% if field.errors %}
                            <li>
                              {{ field.label }}
                              <ul>
                                {% for error in field.errors %}
                                  <li>{{ error }}</li>
                                {% endfor %}
                              </ul>
                            </li>
                          {% endif %}
                        {% endfor %}
                    </ul>
                <button type="submit" class="button">Register</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}